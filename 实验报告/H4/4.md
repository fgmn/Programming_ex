### 一、简答

1. $eps$ 过大可能会导致精度不够，过小会增加时间。
2. 商店 $(D)$ 中存在特殊情况，对于 $ a[i] == a[i - 1] $ 的情况要分类讨论;截绳子 $(D)$ 中设定二分左边界的初值时应该满足小于1.

### 二、作业H4

### A. 截绳子

##### 题目大意
给 $n$ 条长度不一的绳子，要求截出 $k$ 段长度相同的绳子，问这些绳子的最大长度。
##### 解法
二分答案。假设最大长度为 $x$ ，验证是否可以截出 $k$ 段绳。
##### 时间复杂度
$ O(log(1e7)) $
##### 代码
```cpp
double a[100010];
int n, k;

bool Chk(double l) {
    int Cnt = 0;
    for (int i = 0; i < n; i++) {
        Cnt += a[i] / l;
        if (Cnt >= k) return 1;
    }
    return 0;
}

void solve() {
    cin >> n >> k;

    for (int i = 0; i < n; i++) {
        cin >> a[i];
    }

    double l = 0, r = 1e7;

    while ((r - l) > 1e-8) {
        double mid = (l + r) / 2;
        if (Chk(mid)) {
            l = mid;
        }
        else r = mid;
    }

    cout << l << '\n';
}
```

### D. 商店

##### 题目大意
有 $n$ 个商店， 每个商店可以以 $ a[i] $ 交易商品（买或卖），问最大收益及对应的最小交易次数。
##### 解法
差分 $ b[i] = a[i] - a[i - 1] $ ，如果 $ b[i] > 0 $ 则加入答案，最大收益为 $ \sum(b[i] > 0) ? b[i] : 0 $ ；对于最少的交易次数，假设对于相邻的差分 $ b[i] > 0 且 b[i + 1] >= 0 $ ,都加入答案则实际只进行了1次交易，相当于在第 $ i - 1 $ 天买入，在第 $ i + 1 $ 天卖出。
##### 时间复杂度
$ O(n) $
##### 代码
```cpp
/*
1
5
0 1 1 2 3
1 0 1 1
*/
void solve() {
    int n;
    cin >> n;

    vector<ll> a(n);
    for (int i = 0 ; i < n; i++) {
        cin >> a[i];
    }

    ll ans = 0, t = 0, b;
    bool flag = 1;
    for (int i = 1; i < n; i++) {
        b = a[i] - a[i - 1];
        if (b > 0) {
            ans += b;
            if (flag) {
                t++;
                flag = 0;
            }
        }
        else if ((!flag) && (!b)) {
            // 此时不应该卖出
        }
        else flag = 1;
    }

    cout << ans << " " << t * 2 << '\n';
}
```